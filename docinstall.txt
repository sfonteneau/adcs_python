apt-get install samba msktutil nginx python3-flask python3-asn1crypto python3-kerberos krb5-user git python3-defusedxml python3-pyasn1
cd /opt
git clone https://github.com/sfonteneau/adcs_python.git
cd adcs_python
bash create_ca.sh
cp -f /opt/adcs_python/adcs.yaml.template /opt/adcs_python/adcs.yaml
mkdir /opt/adcs_python/list_request_id
cp -f /opt/adcs_python/pki/private/testadcs.mydomain.lan.key.pem /etc/nginx/key.pem
cp -f /opt/adcs_python/pki/certs/testadcs.mydomain.lan.crt.pem /etc/nginx/crt.pem
cp -f /opt/adcs_python/nginx-conf.conf /etc/nginx/sites-enabled/default
openssl dhparam -out /etc/ssl/certs/dhparam.pem  2048


####### JOIN MACHINE #######
configure krb5.conf
try kinit
net ads join

set SPN HTTP on computer account (HTTP/testadcs.mydomain.lan)
add "kerberos method = secrets and keytab" in smb.conf

Run : net ads keytab create

don't forget add fqdn and ip in /etc/hosts







